/*	ITB - Munir José
	Bancos de Dados
	Loja de Informática
*/
-- Criar banco de dados INFOLOJA
CREATE DATABASE	INFOLOJA	
GO

-- Usar banco de dados INFOLOJA
USE INFOLOJA
GO
-- Criar tabela de clientes
CREATE TABLE CLIENTE
(
	CD_CLIENTE INT NOT NULL PRIMARY KEY,
	NM_CLIENTE VARCHAR(30)
);

-- Criar tabela de Produtos
CREATE TABLE PRODUTO
(
	CD_PRODUTO INT NOT NULL PRIMARY KEY,
	DS_PRODUTO VARCHAR(50)
)

-- Criar tabela de Pedidos
CREATE TABLE PEDIDO
(
	CD_PEDIDO INT NOT NULL PRIMARY KEY,
	DT_PEDIDO DATETIME,
	CD_CLIENTE INT
)
-- Criar chaves estrangeiras na tabela de Pedidos
-- Chave estrangeira da tabela Cliente 
ALTER TABLE PEDIDO  
WITH CHECK ADD CONSTRAINT [FK_PEDIDO_CLIENTE] 
FOREIGN KEY (CD_CLIENTE) 
REFERENCES CLIENTE (CD_CLIENTE)

-- Criar tabela de Itens de Pedidos
CREATE TABLE ITEM_PEDIDO
(
	CD_PEDIDO INT,
	CD_PRODUTO INT,
	QT_PRODUTO INT
)
-- Criar chaves estrangeiras na tabela Itens de Pedidos
-- Chave estrangeira da tabela Pedido 
ALTER TABLE ITEM_PEDIDO ADD CONSTRAINT FK_ITEM_PEDIDO_PEDIDO 
FOREIGN KEY (CD_PEDIDO) REFERENCES PEDIDO (CD_PEDIDO)

-- Criar chaves estrangeiras na tabela Itens de Pedidos
-- Chave estrangeira da tabela Pedido 
ALTER TABLE ITEM_PEDIDO ADD CONSTRAINT FK_ITEM_PEDIDO_PRODUTO
FOREIGN KEY (CD_PRODUTO) REFERENCES PRODUTO (CD_PRODUTO)

GO

-- Inserir produtos na tabela de Produtos
INSERT INTO PRODUTO VALUES(1,'HD 40GB')
INSERT INTO PRODUTO VALUES(2,'HD 320GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(3,'PLACA MÃE ASSUS X3')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(4,'PLACA DE REDE GIGABIT')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(5,'PENT MEM 2GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(6,'PENT MEM 4GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(7,'PROC INTEL CORE I5')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(8,'PROC INTEL CORE I7')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(9,'GABINETE AERO III')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(10,'PLACA DE VIDEO GFORCE 2GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(11,'TECLADO ABNT 2 BRZ USB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(12,'MOUSE OPTICO USB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(13,'TECLADO ABNT 2 BRZ WIRELESS')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(14,'MOUSE OPTICO WIRELESS')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(15,'MONITOR LED 15 LG')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(16,'MONITOR LED 17 LG')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(17,'MONITOR LED 21 AOC')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(18,'PEN DRIVE KING 8GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(19,'PEN DRIVE KING 16GB')
INSERT INTO PRODUTO (CD_PRODUTO, DS_PRODUTO) VALUES(20,'PEN DRIVE KING 32GB')

-- Inserir Cleintes na tabela de Clientes
INSERT INTO CLIENTE VALUES (1,'JOSÉ')
INSERT INTO CLIENTE VALUES (2,'PALOMA')
INSERT INTO CLIENTE VALUES (3,'LUCAS')
INSERT INTO CLIENTE VALUES (4,'JONATHAN')
INSERT INTO CLIENTE VALUES (5,'HUMBERTO')

-- Insere pedidos 
INSERT INTO PEDIDO VALUES (1,GETDATE(), 1)
INSERT INTO PEDIDO VALUES (2,GETDATE(), 5)

-- Insere intes de pedidos 
INSERT INTO ITEM_PEDIDO VALUES(1,3,1)
INSERT INTO ITEM_PEDIDO VALUES(1,4,1)
INSERT INTO ITEM_PEDIDO VALUES(1,6,2)
INSERT INTO ITEM_PEDIDO VALUES(1,7,1)
INSERT INTO ITEM_PEDIDO VALUES(1,9,1)
INSERT INTO ITEM_PEDIDO VALUES(1,10,1)
INSERT INTO ITEM_PEDIDO VALUES(1,13,1)
INSERT INTO ITEM_PEDIDO VALUES(1,14,1)
INSERT INTO ITEM_PEDIDO VALUES(1,17,1)
INSERT INTO ITEM_PEDIDO VALUES(1,20,2)

--- Extras  

-- Comandos Extras
-- Selecionar data e hora atual do sistema
SELECT CURRENT_TIMESTAMP

-- Selecionar data e hora atual do sistema
SELECT GETDATE()

-- Selecionar nome do usuário atual do sistema
SELECT SUSER_SNAME()

-- Mostra os Banco de dados existentes
--SP_HELPDB

-- Mostra todos os objetos do Banco de dados
-- SP_HELP

-- Mostra todas as tabelas do Banco de dados
-- sp_tables

SELECT * FROM CLIENTE
SELECT * FROM PRODUTO


